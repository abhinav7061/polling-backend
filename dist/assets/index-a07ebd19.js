import{r as t,j as e}from"./index-4f8d315e.js";import{d as k}from"./debounce-13b53e9a.js";import{S as T}from"./SpinLoader-1c504879.js";import{V as L}from"./index-89414d6f.js";import{p as M}from"./index-2740fe42.js";import{T as H,C as O}from"./TransitionGroup-12f7dff9.js";import{s as w}from"./styles-0ca58f2b.js";const z=l=>{const[i,n]=t.useState([]),[a,d]=t.useState(null),[r,s]=t.useState(1),[o,p]=t.useState(!0),[h,g]=t.useState(!0),[b,v]=t.useState(""),[j,y]=t.useState("newer"),[S,P]=t.useState("all"),[E,N]=t.useState(null),_=async()=>{try{const c=await(await fetch(`${l}?page=${encodeURIComponent(r)}&search=${encodeURIComponent(b)}&sort=${j}&active=${S}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"})).json();if(c.success)c.polls.length<5&&p(!1),n($=>[...new Set([...$,...c.polls])]);else throw new Error(c.message)}catch(x){console.log("Error fetching data:",x),d(x.message)}finally{g(!1)}};t.useEffect(()=>{o&&_()},[r,o]);const C=()=>{window.innerHeight+document.documentElement.scrollTop>=document.documentElement.scrollHeight-150&&(g(!0),s(c=>c+1))},f=t.useCallback(k(C,100),[]);return t.useEffect(()=>(window.addEventListener("scroll",f,{passive:!0}),()=>{window.removeEventListener("scroll",f)}),[f]),{feeds:i,setFeeds:n,errorMessage:a,loading:h,hasMore:o,search:b,sort:j,active:S,setSearch:v,setSort:y,setActive:P,resetPolls:()=>{N(b),v(""),n([]),p(!0),g(!0),r===1?_():s(1)},searchPlaceholder:E}},R="_poll_item_ng3t9_1",A="_bounceOut_ng3t9_1",u={poll_item:R,"bounce-enter":"_bounce-enter_ng3t9_6","bounce-enter-active":"_bounce-enter-active_ng3t9_11","bounce-exit":"_bounce-exit_ng3t9_17","bounce-exit-active":"_bounce-exit-active_ng3t9_22",bounceOut:A},B=({feeds:l,setFeeds:m,loading:i,hasMore:n,role:a,customMessage:d})=>{const r=d||M[a]||"No Feeds Found",s=o=>{m(p=>p.filter(h=>h._id!==o))};return e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx(H,{children:l.length>0&&l.map(o=>e.jsx(O,{timeout:500,classNames:{enter:u["bounce-enter"],enterActive:u["bounce-enter-active"],exit:u["bounce-exit"],exitActive:u["bounce-exit-active"]},children:e.jsx("div",{className:`bg-white rounded-[10px] overflow-hidden mb-4 px-2 py-1 md:px-6 md:py-2 relative ${u.poll_item}`,children:e.jsx(L,{pollData:o,role:a,deletePollCallback:s})})},o._id))}),i&&n?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(T,{})}):l.length===0?e.jsx("h1",{className:"text-center text-base lg:text-xl font-semibold",children:r}):e.jsx("h1",{className:"text-center text-base lg:text-xl font-semibold",children:"You have Reached the end"})]})},J=({search:l,sort:m,setSearch:i,setSort:n,onSearchSortSubmit:a,children:d,searchPlaceholder:r})=>e.jsxs("form",{className:`lg:ml-7 lg:pl-7 lg:border-l lg:border-slate-400 flex lg:flex-col justify-between lg:justify-start lg:mb-0 flex-wrap gap-3 ${w.heading6} h-auto lg:h-screen backdrop-blur-sm overflow-y-auto overflow-x-hidden sticky top-3 left-0`,onSubmit:a,children:[e.jsx("input",{type:"text",placeholder:r||"Search Poll",value:l,onChange:s=>i(s.target.value),className:"border-2 border-slate-400 px-3 sm:px-5 lg:py-2 py-1 outline-none focus:border-slate-600 rounded-3xl flex-1 lg:flex-none"}),e.jsxs("select",{value:m,onChange:s=>n(s.target.value),className:`lg:mt-4 ${w.heading6} outline-none font-bold px-3 py-2 rounded-3xl bg-slate-400 cursor-pointer`,children:[e.jsx("option",{value:"newer",children:"Newer"}),e.jsx("option",{value:"older",children:"Older"}),e.jsx("option",{value:"likes",children:"Likes"}),e.jsx("option",{value:"votes",children:"Votes"})]}),d,e.jsx("button",{className:"px-2 md:px-3 py-1 rounded-md text-black hover:text-white bg-slate-300 hover:bg-sky-400 duration-500 transition-colors font-semibold lg:mt-5",type:"submit",children:"Get Polls"})]});export{B as P,J as S,z as u};
