import{r as a,U as u,u as f,j as e,N as m,L as p,a as j,O as g}from"./index-4dcbfe16.js";import{U as b}from"./index-69a0fb70.js";import{s as o}from"./styles-e7ca6728.js";import{n as h,f as N}from"./index-2740fe42.js";import{L as y,C as v}from"./index-20999a7c.js";import{L}from"./SpinLoader-78ef40b6.js";const k="/assets/menu-e0613cf3.svg",C="/assets/close-945782e8.svg";function w(){const{userInfo:s}=a.useContext(u),r=f(),[n,c]=a.useState(!1);return e.jsx("nav",{className:`${o.paddingX} md:py-5 py-3 sticky top-0 bg-gray-900 z-[1000]`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(m,{to:"/",className:"flex items-center",children:[e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/6432/6432236.png?track=ais",className:"h-8 mr-1",alt:"pollab"}),e.jsx("span",{className:"self-center text-sm font-semibold text-white",children:"PollLab"})]}),e.jsx("div",{className:"items-center hidden md:flex",children:e.jsx("ul",{className:"flex font-medium",children:h.map((t,i)=>e.jsx("li",{children:e.jsx(m,{to:t.linkTo,className:({isActive:d})=>{const l=d?"text-sky-600":"text-white",x=i===0?"ml-0":"ml-6";return l+" hover:text-sky-400 "+x},children:t.name})},t.id))})}),s&&e.jsxs("div",{className:`flex justify-center items-center ${o.heading6} `,children:[e.jsx(p,{to:"profile",children:e.jsxs("p",{className:"text-white",children:["Hi ",s.name," !"]})}),e.jsx(y,{})]}),e.jsx("div",{className:`hidden ${s?null:"md:block"} `,children:e.jsx("button",{type:"button",className:" bg-green-500 text-black hover:bg-blue-400  font-semibold py-2 px-5 rounded text-base",onClick:()=>{r("/login")},children:"LogIn/SignUp"})}),e.jsxs("div",{className:"flex md:hidden items-center z-50",children:[e.jsx("div",{className:"text-3xl md:hidden cursor-pointer",onClick:()=>c(t=>!t),"aria-expanded":n,children:e.jsx("img",{src:n?C:k,alt:"menu",className:""})}),e.jsx("div",{className:` ${n?"flex":"hidden"} items-center flex absolute top-16 right-0 mx-4 my-2 min-w-[140px] rounded-xl sidebar bg-slate-900 p-6`,children:e.jsxs("ul",{className:"fflex justify-end items-start flex-1 flex-col",children:[h.map(t=>e.jsx("li",{onClick:()=>c(!n),children:e.jsx(m,{to:t.linkTo,className:({isActive:i})=>(i?"text-sky-600":"text-white")+" hover:text-sky-400",children:t.name})},t.id)),e.jsx("li",{className:`${s?"hidden":"mt-4"}`,children:e.jsx("button",{type:"button",className:" bg-green-500 text-black hover:bg-blue-400  font-semibold py-2 px-5 rounded text-base",onClick:()=>{r("/login")},children:"LogIn/SignUp"})})]})})]})]})})}function U(){return e.jsxs("div",{className:`${o.paddingX} bg-gray-900 text-white md:py-5 py-3 flex justify-between items-center text-[14px] mt-auto`,children:[e.jsxs("p",{children:["Copyright â’¸ 2023 Pollab.",e.jsx("br",{className:"md:hidden"})," All Rights Reserved."]}),e.jsx("div",{children:e.jsx("ul",{className:"flex  flex-col md:flex-row",children:N.map(s=>e.jsx("li",{className:"m-2",children:e.jsx(p,{to:s.linkTo,children:s.name})},s.id))})})]})}const $=()=>{const s={display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",width:"100%",backgroundColor:"#000",color:"#fff",fontSize:44};return e.jsx("div",{style:s,children:"Loading..."})},S="http://localhost:5000/api/v1",O=()=>{const{userInfo:s,setUserInfo:r}=a.useContext(u),[n,c]=a.useState(!0),t=f(),i=j(),d=async()=>{try{const l=await fetch(`${S}/user/me`,{credentials:"include"}),x=await l.json();x.success&&l.ok&&(r(x.user),i.pathname.startsWith("/poll")||t("/poll"))}catch(l){console.error("Error fetching user data:",l)}finally{c(!1)}};return a.useEffect(()=>{d()},[]),e.jsx("div",{className:`${o.flexCenter}`,children:n?e.jsx($,{}):e.jsxs("div",{className:`${o.boxWidth} flex flex-col min-h-screen`,children:[s?null:e.jsx(w,{}),e.jsx(b,{position:"top-right",richColors:!0,closeButton:"true"})," ",e.jsx(a.Suspense,{fallback:e.jsx(v,{children:e.jsx(L,{})}),children:e.jsx(g,{})}),s?null:e.jsx(U,{})]})})};export{O as default};
