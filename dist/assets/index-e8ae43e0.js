import{r as h,j as o,u as ye,U as ie,L as je,g as ae,R as ke,_ as Ce,a as Ne}from"./index-9aec5bf0.js";import{s as _}from"./styles-0ca58f2b.js";import{w as N}from"./index-115b0bce.js";import{u as Se,D as le,U as De,F as Ae,r as Le,d as $e,a as Ee,f as Oe}from"./index-0b1531bc.js";import{a as ce,M as _e}from"./SpinLoader-1fa1f2e1.js";import{C as Te,A as Pe,b as Ie,c as Me,w as Ue,g as We,f as Ve}from"./index-ce1f1610.js";import{u as Be}from"./useMediaQuery-44146a80.js";const Re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADOklEQVR4nO2VS08TQRzAJyGd2aOcOOtJzpyQpzGwMyU7s+GRiKgQ8IVghICPoOLn8OTONCEGOOJn2JnqZyEIyKM8aigWOjvTUgW3NdlfMhfyC/39t//OApCQkJCQkJBwebCkg0TRpZbvT1IVxQAOAo6WwCdQ2YsTErIBotgBUSyPFV0tO4SAA4CjAyBQHnC0WhdDkJL44sGSfqkYf35ML07crNdPJM1p8Yoe4pDe1UQO+4FAOS2eo0MgUroXJzhkaSLZXhXxaSDQXl3Fk6xPbPGu9Ic1MYDEGp9JDdddPFHsXlXxPKV7cZJWHiaK7Rpro+iIJgqEgUC7lrUZqb/4rHe/qvjA0b04cRVzbfFpyR5oIkeuNZ47uhcnWPq9RrykR0TSh5oYoF4jXqAjIBzdixMSej22eKy8UU0UqMcaz53RmsZjRXdK44lkx65kT414jnYia3MMAqR7cZJWtJNIth2NJ4o+08TA6QQcbRvxHOneRQwtDzUQyQLjLo6yDBqAgEGlu9iVrIMouhWNx8qf1MSM0wE42jLiBZr843isqCj7KtfjRaVXOQ79dmt8lj3XRO60W+M50r1q+P3kS39k+25IqSGePHn9A/dBBp55OOt32dbG2HnudFnXJvjLnT+5EQrXWmQInGVe5INHT6+1yBACeuSb14YV2zR2XtIp7X98dtqAQJuWtZkCl8FVbMw2hCtpnyYKNBYdonGlKedKz7htiPSmq4yfBlcBlnTcGELRHazYHU3kaLw4RONKU74n7MubP1j2Qh/cuWWN50j3Lj8EmzC/CfYzLeltPQhNXFtpOjLiTwd4rQ/stBrxhQN176ogij06vbP1IdyQdRcdV/mtroqsjWL5G2vNOZBB3Vo8Rz8s8W/+SXwRoujj6BAnN8zJC6pP+i1YsXUj/mtzcTW2Cy+oINUCOFo34jl8C+KAhPSluR50o3Aif7++djMSiTYKx4x/BeIESzZjDGHu/ALgcMZck8jJwIVY44tgSWfLxWNF352JAs6Wjefw3KsFRLG5aLyr6HtD5HDO8oM1vVqAJZsvGeBDWVHA+ZInX96rBVjSRSzpxwtFDheBgBd7CQkJCQkJCeD/5hcP72rc0mQERAAAAABJRU5ErkJggg==",ne="/assets/like-4a6de142.svg",He="/assets/likedThumb-8a697d04.svg";const de=({visibility:e,onClose:t,children:n,className:r})=>{const[s,i]=h.useState(!1),a=c=>{i(!1),t(!1)};return h.useEffect(()=>{i(e)},[e]),o.jsx(o.Fragment,{children:s&&o.jsx("div",{className:`fixed top-0 bottom-0 left-0 right-0 bg-black/60 z-[1000] flex items-center justify-center ${r}`,children:o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"text-gray-800 bg-white/60 h-6 w-6 rounded-full shadow-2xl cursor-pointer hover:bg-red-100 hover:text-red-600 flex sm:hidden group-hover:flex items-center justify-center absolute -right-0 translate-x-[40%] -translate-y-[40%] text-xl",onClick:a,children:o.jsx("ion-icon",{name:"close-outline"})}),o.jsx("div",{className:"rounded-lg p-5 bg-slate-50 max-h-[80vh] max-w-[90vw] overflow-auto",children:n})]})})})},Fe=({visibility:e,onClose:t,warningMessage:n="",onAcceptance:r})=>{const[s,i]=h.useState(!1),a=()=>{i(!1),t(!1)};return h.useEffect(()=>{i(e)},[e]),o.jsx(de,{onClose:a,visibility:s,children:o.jsxs("div",{className:"p-4 md:p-5 text-center",children:[o.jsx("svg",{className:"mx-auto mb-4 w-12 h-12 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),o.jsx("h3",{className:"mb-5 text-lg font-normal text-gray-600",children:n}),o.jsxs("div",{className:"flex gap-3 justify-center flex-wrap",children:[o.jsx("button",{type:"button",className:"py-2.5 px-5 text-sm font-medium text-gray-900 rounded-lg border border-gray-600 hover:border-blue-500  hover:bg-blue-200/50 hover:text-blue-700",onClick:()=>r(!0),children:"Yes, I'm sure"}),o.jsx("button",{type:"button",className:"text-red-600 border border-red-400 hover:bg-red-200 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center",onClick:()=>r(!1),children:"No, cancel"})]})]})})},ze="http://localhost:5000/api/v1",Ke=({pollId:e,deletePollCallback:t})=>{const[n,r]=h.useState(!1),s=async()=>{try{const c=await(await fetch(`${ze}/poll/delete/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"})).json();if(c.success)N.info("Poll deleted"),t(e);else throw new Error((c==null?void 0:c.message)||"Error occure during deleting the poll")}catch(a){console.log("Error while deleting your Votes",a),N.error("Error while deleting your Votes")}},i=a=>{a?s():r(!1)};return o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:"hover:text-red-500 flex gap-1 items-center px-2 py-1 hover:bg-red-100 rounded-md w-full",title:"Delete Poll",onClick:()=>r(!0),children:[o.jsx("ion-icon",{name:"trash-outline"})," Delete"]}),o.jsx(Fe,{visibility:n,warningMessage:"Are you sure you want to delete this Poll?",onClose:a=>r(a),onAcceptance:i})]})},Je="http://localhost:5000/api/v1",Qe=({pollId:e,isSaved:t,callback:n})=>{const[r,s]=h.useState(!1),i=ye(),a=async()=>{s(!0);try{const c=await fetch(`${Je}/save-poll/save-unsave/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include"}),l=await c.json();if(c.ok&&l.success)n&&(n(l),N(o.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[o.jsx("span",{className:"text-xl",children:o.jsx("ion-icon",{name:"checkmark-circle"})}),o.jsxs("p",{children:[l.message,". ",o.jsx("button",{type:"button",className:"text-blue-500 hover:underline font-semibold",onClick:()=>{i("/poll/saved-polls")},children:"View Saved Polls"})]})]}),{duration:2e3}));else throw new Error(l.message)}catch(c){N.error(c.message)}finally{s(!1)}};return o.jsxs("button",{type:"button",className:"flex gap-1 items-center px-2 py-1 hover:bg-slate-200 rounded-md cursor-pointer",onClick:a,title:t?"Unsave Poll":"Save Poll",disabled:r,children:[r?o.jsxs("svg",{"aria-hidden":"true",className:"w-2.5 h-2.5 sm:w-3 sm:h-3 lg:w-3.5 lg:h-3.5 text-gray-200 animate-spin dark:text-gray-400 fill-black",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),o.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}):o.jsx("ion-icon",{name:t?"bookmark":"bookmark-outline"}),t?"Unsave":"Save"]})},Ye="http://localhost:5000/api/v1",Ze=({author:e,pollId:t,deletePollCallback:n})=>{const{userInfo:r}=h.useContext(ie),[s,i]=h.useState(null),[a,c]=h.useState(!1),[l,d]=h.useState(!1),[u,p]=h.useState(null),[g,y]=h.useState(!1),{isFollower:w,loading:k,checkFollowing:S}=Se({followerId:r._id,followingId:e}),[E,C]=h.useState(!1),O=async()=>{d(!0),p(null);try{const D=await fetch(`${Ye}/save-poll/isSaved/${t}`,{credentials:"include"}),$=await D.json();if(D.ok&&$.success)i($.isSaved);else throw new Error($.message)}catch(D){console.log(D),N.error(`Error checking poll save status: ${D.message}`),p(D.message)}finally{d(!1)}},L=async()=>{E||(await S(),await O()),C(!E)},T=()=>{N.success("Successfully unfollowed"),S()},B=()=>{N.success("Successfully Followed"),S()},M=D=>{(()=>{navigator.clipboard.writeText(D).then(()=>{N.success("Link copied to clipboard"),y(!0),setTimeout(()=>y(!1),500)}).catch(U=>{console.error("Failed to copy Link: ",U)})})()};return h.useEffect(()=>{c(l||k)},[l,k]),o.jsx(le,{Btn:a?o.jsx(ce,{}):o.jsx("span",{className:"cursor-pointer text-slate-500 hover:text-slate-900 p-1 mb-1 hover:bg-slate-300 flex rounded-full",onClick:L,children:o.jsx("ion-icon",{name:"ellipsis-vertical"})}),dropDownElm:o.jsxs("span",{className:`absolute h-auto flex flex-col gap-1 ${_.heading6} p-2 border border-slate-500 rounded-lg shadow-black shadow-sm right-4 bg-white z-50 `,children:[r&&r._id===e&&o.jsxs("span",{className:"",children:[o.jsxs(je,{to:`/poll/edit-poll/${t}`,className:" hover:text-blue-600 flex gap-1 items-center px-2 py-1 hover:bg-blue-100 rounded-md",title:"Edit Poll",children:[o.jsx("ion-icon",{name:"create-outline"})," Edit"]}),o.jsx(Ke,{pollId:t,deletePollCallback:n})]}),r._id!==e&&o.jsx(o.Fragment,{children:w?o.jsx(De,{userId:r._id,userToUnfollowId:e,callback:T}):o.jsx(Ae,{userToFollow:e,callback:B})}),o.jsx("button",{className:`flex gap-1 items-center px-2 py-1 rounded-md ${g?"hover:bg-green-100 hover:text-green-600":"hover:bg-lime-100 hover:text-lime-600"} whitespace-nowrap`,onClick:()=>M(`http://localhost:5173/poll/posts/${t}`),children:g?o.jsxs(o.Fragment,{children:[o.jsx("ion-icon",{name:"checkmark-circle"}),"Link Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx("ion-icon",{name:"link-outline"}),"Copy Link"]})}),u?o.jsxs("button",{type:"button",className:"text-red-500 flex gap-1 items-center px-2 py-1 hover:bg-red-100 rounded-md hover:text-red-600",title:`Error checking poll saved states. Error message: ${u} click to refresh`,onClick:O,children:[o.jsx("ion-icon",{name:"alert-circle-outline"})," Error"]}):o.jsx(Qe,{pollId:t,isSaved:s,callback:()=>{i(!s)}})]}),showDropDown:E,setShowDropdown:C})};const Xe=({content:e})=>{const[t,n]=h.useState(!1),[r,s]=h.useState(!1),i=h.useRef(null);h.useEffect(()=>{if(i.current){const c=i.current,l=c.offsetHeight<c.scrollHeight;s(l)}},[e]);const a=()=>{n(!t)};return o.jsxs("div",{className:`accordion ${r?"overflowed":""} ${_.heading5}`,children:[o.jsx("div",{className:`accordion-content ${t?"expanded":""}`,ref:i,children:e}),r&&o.jsx("div",{onClick:a,className:"hover:underline cursor-pointer duration-300 hover:text-sky-800",children:o.jsx("h3",{children:t?"See less":"See more"})})]})},qe="http://localhost:5000/api/v1",Ge=({pollId:e})=>{const[t,n]=h.useState(0),r=async()=>{try{const s=await fetch(`${qe}/comment/commentCount/${e}`),i=await s.json();s.ok&&i.success?n(i.count):console.error("Error:",i.message)}catch(s){console.error("Error fetching comment count:",s.message)}};return h.useEffect(()=>{r()},[]),o.jsxs("div",{className:"hover:underline cursor-pointer",children:[t," Comment"]})};function et(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var ue=6e4,he=36e5;function tt(e,t){var n;Le(1,arguments);var r=et((n=t==null?void 0:t.additionalDigits)!==null&&n!==void 0?n:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=st(e),i;if(s.date){var a=it(s.date,r);i=at(a.restDateString,a.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var c=i.getTime(),l=0,d;if(s.time&&(l=lt(s.time),isNaN(l)))return new Date(NaN);if(s.timezone){if(d=ct(s.timezone),isNaN(d))return new Date(NaN)}else{var u=new Date(c+l),p=new Date(0);return p.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),p.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),p}return new Date(c+l+d)}var J={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},nt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ot=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,rt=/^([+-])(\d{2})(?::?(\d{2}))?$/;function st(e){var t={},n=e.split(J.dateTimeDelimiter),r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],J.timeZoneDelimiter.test(t.date)&&(t.date=e.split(J.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){var s=J.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function it(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((r[1]||r[2]).length)}}function at(e,t){if(t===null)return new Date(NaN);var n=e.match(nt);if(!n)return new Date(NaN);var r=!!n[4],s=R(n[1]),i=R(n[2])-1,a=R(n[3]),c=R(n[4]),l=R(n[5])-1;if(r)return pt(t,c,l)?dt(t,c,l):new Date(NaN);var d=new Date(0);return!ht(t,i,a)||!ft(t,s)?new Date(NaN):(d.setUTCFullYear(t,i,Math.max(s,a)),d)}function R(e){return e?parseInt(e):1}function lt(e){var t=e.match(ot);if(!t)return NaN;var n=X(t[1]),r=X(t[2]),s=X(t[3]);return mt(n,r,s)?n*he+r*ue+s*1e3:NaN}function X(e){return e&&parseFloat(e.replace(",","."))||0}function ct(e){if(e==="Z")return 0;var t=e.match(rt);if(!t)return 0;var n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return wt(r,s)?n*(r*he+s*ue):NaN}function dt(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,i=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}var ut=[31,null,31,30,31,30,31,31,30,31,30,31];function fe(e){return e%400===0||e%4===0&&e%100!==0}function ht(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(ut[t]||(fe(e)?29:28))}function ft(e,t){return t>=1&&t<=(fe(e)?366:365)}function pt(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function mt(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function wt(e,t){return t>=0&&t<=59}const oe=e=>{const n=tt(e),s=$e(n,new Date),i=Math.floor(s/(24*60*60*1e3)),a=Math.floor(s%(24*60*60*1e3)/(60*60*1e3)),c=Math.floor(s%(60*60*1e3)/(60*1e3)),l=Math.floor(s%(60*1e3)/1e3);return i>0?`${i} days ${a} hours`:a>0?`${a} hours ${c} minutes`:c>0?`${c} minutes ${l} seconds`:-1},gt=()=>o.jsxs("div",{className:"lds-ellipsis",children:[o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{}),o.jsx("div",{})]});Te.register(Pe,Ie,Me);const xt=(e,t)=>{const n=document.getElementById(t);let r=n.querySelector("ul");return r||(r=document.createElement("ul"),r.style.display="flex",r.style.justifyContent="center",r.style.gap="0px 5px",r.style.flexWrap="wrap",r.style.margin=0,r.style.padding=0,n.appendChild(r)),r},vt={id:"htmlLegend",afterUpdate(e,t,n){const r=xt(e,n.containerID);for(;r.firstChild;)r.firstChild.remove();e.options.plugins.legend.labels.generateLabels(e).forEach(i=>{const a=document.createElement("li");a.style.alignItems="center",a.style.cursor="pointer",a.style.display="flex",a.style.flexDirection="row",a.style.marginLeft="10px",a.onclick=()=>{const{type:u}=e.config;u==="pie"||u==="doughnut"?e.toggleDataVisibility(i.index):e.setDatasetVisibility(i.datasetIndex,!e.isDatasetVisible(i.datasetIndex)),e.update()};const c=document.createElement("span");c.style.background=i.fillStyle,c.style.borderColor=i.strokeStyle,c.style.borderWidth=i.lineWidth+"px",c.style.display="block",c.style.flexShrink=0,c.style.height="10px",c.style.marginRight="5px",c.style.width="30px";const l=document.createElement("p");l.style.color=i.fontColor,l.style.margin=0,l.style.padding=0,l.style.textDecoration=i.hidden?"line-through":"";const d=document.createTextNode(i.text);l.appendChild(d),a.appendChild(c),a.appendChild(l),r.appendChild(a)})}},bt=({data:e,label:t,backgroundColor:n,borderColor:r,footer:s,id:i})=>{const a={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",display:!1},htmlLegend:{containerID:i||`${t}`},tooltip:{callbacks:{footer:s}}}},c=Be("(max-width: 500px)"),l={labels:e.map((d,u)=>Ue(d.label,c?50:75)||u),datasets:[{label:t,data:e.map(d=>d.count),backgroundColor:n,borderColor:r,borderWidth:1}]};return o.jsxs("div",{className:"flex flex-col justify-between items-center w-full h-full",children:[o.jsx("div",{id:i||`${t}`,className:"p-2 text-[10px] flex-grow"}),o.jsx("div",{className:"flex-grow w-full flex items-center justify-center",children:o.jsx(We,{options:a,data:l,plugins:[vt]})})]})},Y=({icon:e,title:t,onClick:n,className:r})=>o.jsxs("div",{className:`${_.heading6} flex gap-1 items-center justify-center flex-grow p-2 rounded-md hover:bg-slate-200 cursor-pointer ${r}`,onClick:n,children:[o.jsx("span",{className:"flex text-sm md:text-2xl",children:e}),o.jsx("h5",{className:"lg:hidden xl:block",children:t})]}),yt=({data:e,title:t,voted:n,ended:r,isPollCreator:s})=>{const[i,a]=h.useState(!1),[c,l]=h.useState(!0),d=()=>{a(!1)},u=e.map(w=>({label:w.subject,count:w.votes})),p=()=>{let w=0;return e.forEach(k=>{w+=k.votes}),`Total Votes: ${w}`},g=h.useCallback(w=>{const k=new Set;for(;k.size<w;){const S=`rgba(${Math.floor(Math.random()*255)}, ${Math.floor(Math.random()*255)}, ${Math.floor(Math.random()*255)}, 0.2)`;k.add(S)}return Array.from(k)},[e]),y=h.useMemo(()=>g(e.length),[e]);return o.jsxs(o.Fragment,{children:[o.jsx(Y,{icon:o.jsx("ion-icon",{name:"pie-chart"}),onClick:()=>{if(!n&&!s){N(r?"You had not voted on this poll":"You have not voted on this poll. Vote first to see the result");return}a(!0)},title:"Result"}),o.jsx(de,{onClose:d,visibility:i,children:o.jsxs("div",{className:"flex flex-col w-[80vw] max-w-[575px] h-[65vh] max-h-[575px] min-h-[250px]",children:[o.jsxs("span",{className:"w-full",children:[o.jsxs("ul",{className:"w-full flex gap-5 px-5 border-b",children:[o.jsx("li",{className:`p-1 font-semibold border-b-2 border-transparent ${c?"text-green-600 border-green-600":" hover:border-green-500 hover:text-green-600"} cursor-pointer ${_.heading5}`,onClick:()=>l(!0),children:"Pie Chart"}),o.jsx("li",{className:`p-1 font-semibold border-b-2 border-transparent ${c?"hover:border-pink-500 hover:text-pink-600":"border-pink-600 text-pink-600"} cursor-pointer ${_.heading5}`,onClick:()=>l(!1),children:"Line Chart"})]}),o.jsxs("h3",{className:"text-center text-sm py-2",children:["Q. ",t]})]}),o.jsx("span",{className:"flex items-center justify-center flex-grow w-full",children:c?o.jsx("div",{className:"h-full",children:o.jsx(bt,{data:u,label:"No Of Votes",backgroundColor:y,borderColor:y.map(w=>w.replace("0.2","0.5")),footer:p,id:"lagend-container"})}):o.jsx(Ve,{data:u,label:"No Of Votes",xAxisTitle:"Options",yAxisTitle:"Numbers of Votes",footer:p})})]})})]})};var pe={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",a=0;a<arguments.length;a++){var c=arguments[a];c&&(i=s(i,r(c)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var a="";for(var c in i)t.call(i,c)&&i[c]&&(a=s(a,c));return a}function s(i,a){return a?i?i+" "+a:i+a:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(pe);var jt=pe.exports;const me=ae(jt);var q={exports:{}},G={exports:{}},H=1e3,F=H*60,z=F*60,K=z*24,kt=K*365.25,Ct=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0)return Nt(e);if(n==="number"&&isNaN(e)===!1)return t.long?Dt(e):St(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Nt(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*kt;case"days":case"day":case"d":return n*K;case"hours":case"hour":case"hrs":case"hr":case"h":return n*z;case"minutes":case"minute":case"mins":case"min":case"m":return n*F;case"seconds":case"second":case"secs":case"sec":case"s":return n*H;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function St(e){return e>=K?Math.round(e/K)+"d":e>=z?Math.round(e/z)+"h":e>=F?Math.round(e/F)+"m":e>=H?Math.round(e/H)+"s":e+"ms"}function Dt(e){return Q(e,K,"day")||Q(e,z,"hour")||Q(e,F,"minute")||Q(e,H,"second")||e+" ms"}function Q(e,t,n){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}(function(e,t){t=e.exports=s.debug=s.default=s,t.coerce=l,t.disable=a,t.enable=i,t.enabled=c,t.humanize=Ct,t.names=[],t.skips=[],t.formatters={};var n;function r(d){var u=0,p;for(p in d)u=(u<<5)-u+d.charCodeAt(p),u|=0;return t.colors[Math.abs(u)%t.colors.length]}function s(d){function u(){if(u.enabled){var p=u,g=+new Date,y=g-(n||g);p.diff=y,p.prev=n,p.curr=g,n=g;for(var w=new Array(arguments.length),k=0;k<w.length;k++)w[k]=arguments[k];w[0]=t.coerce(w[0]),typeof w[0]!="string"&&w.unshift("%O");var S=0;w[0]=w[0].replace(/%([a-zA-Z%])/g,function(C,O){if(C==="%%")return C;S++;var L=t.formatters[O];if(typeof L=="function"){var T=w[S];C=L.call(p,T),w.splice(S,1),S--}return C}),t.formatArgs.call(p,w);var E=u.log||t.log||console.log.bind(console);E.apply(p,w)}}return u.namespace=d,u.enabled=t.enabled(d),u.useColors=t.useColors(),u.color=r(d),typeof t.init=="function"&&t.init(u),u}function i(d){t.save(d),t.names=[],t.skips=[];for(var u=(typeof d=="string"?d:"").split(/[\s,]+/),p=u.length,g=0;g<p;g++)u[g]&&(d=u[g].replace(/\*/g,".*?"),d[0]==="-"?t.skips.push(new RegExp("^"+d.substr(1)+"$")):t.names.push(new RegExp("^"+d+"$")))}function a(){t.enable("")}function c(d){var u,p;for(u=0,p=t.skips.length;u<p;u++)if(t.skips[u].test(d))return!1;for(u=0,p=t.names.length;u<p;u++)if(t.names[u].test(d))return!0;return!1}function l(d){return d instanceof Error?d.stack||d.message:d}})(G,G.exports);var At=G.exports;(function(e,t){t=e.exports=At,t.log=s,t.formatArgs=r,t.save=i,t.load=a,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};function r(l){var d=this.useColors;if(l[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+l[0]+(d?"%c ":" ")+"+"+t.humanize(this.diff),!!d){var u="color: "+this.color;l.splice(1,0,u,"color: inherit");var p=0,g=0;l[0].replace(/%[a-zA-Z%]/g,function(y){y!=="%%"&&(p++,y==="%c"&&(g=p))}),l.splice(g,0,u)}}function s(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function a(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}t.enable(a());function c(){try{return window.localStorage}catch{}}})(q,q.exports);var Lt=q.exports,re=Lt("jsonp"),$t=_t,Et=0;function Ot(){}function _t(e,t,n){typeof t=="function"&&(n=t,t={}),t||(t={});var r=t.prefix||"__jp",s=t.name||r+Et++,i=t.param||"callback",a=t.timeout!=null?t.timeout:6e4,c=encodeURIComponent,l=document.getElementsByTagName("script")[0]||document.head,d,u;a&&(u=setTimeout(function(){p(),n&&n(new Error("Timeout"))},a));function p(){d.parentNode&&d.parentNode.removeChild(d),window[s]=Ot,u&&clearTimeout(u)}function g(){window[s]&&p()}return window[s]=function(y){re("jsonp got",y),p(),n&&n(null,y)},e+=(~e.indexOf("?")?"&":"?")+i+"="+c(s),e=e.replace("?&","?"),re('jsonp req "%s"',e),d=document.createElement("script"),d.src=e,l.parentNode.insertBefore(d,l),g}const P=ae($t);var Tt=Object.defineProperty,Pt=Object.defineProperties,It=Object.getOwnPropertyDescriptors,Z=Object.getOwnPropertySymbols,we=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,se=(e,t,n)=>t in e?Tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t)=>{for(var n in t||(t={}))we.call(t,n)&&se(e,n,t[n]);if(Z)for(var n of Z(t))ge.call(t,n)&&se(e,n,t[n]);return e},ee=(e,t)=>Pt(e,It(t)),te=(e,t)=>{var n={};for(var r in e)we.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Z)for(var r of Z(e))t.indexOf(r)<0&&ge.call(e,r)&&(n[r]=e[r]);return n};function x(e){const t=Object.entries(e).filter(([,n])=>n!=null).map(([n,r])=>`${encodeURIComponent(n)}=${encodeURIComponent(String(r))}`);return t.length>0?`?${t.join("&")}`:""}const Mt=e=>!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function",Ut=(e,t)=>({left:window.outerWidth/2+(window.screenX||window.screenLeft||0)-e/2,top:window.outerHeight/2+(window.screenY||window.screenTop||0)-t/2}),Wt=(e,t)=>({top:(window.screen.height-t)/2,left:(window.screen.width-e)/2});function Vt(e,t,n){var r=t,{height:s,width:i}=r,a=te(r,["height","width"]);const c=A({height:s,width:i,location:"no",toolbar:"no",status:"no",directories:"no",menubar:"no",scrollbars:"yes",resizable:"no",centerscreen:"yes",chrome:"yes"},a),l=window.open(e,"",Object.keys(c).map(d=>`${d}=${c[d]}`).join(", "));if(n){const d=window.setInterval(()=>{try{(l===null||l.closed)&&(window.clearInterval(d),n(l))}catch(u){console.error(u)}},1e3)}return l}function Bt(e){var t=e,{beforeOnClick:n,children:r,className:s,disabled:i,disabledStyle:a={opacity:.6},forwardedRef:c,htmlTitle:l,networkLink:d,networkName:u,onClick:p,onShareWindowClose:g,openShareDialogOnClick:y=!0,opts:w,resetButtonStyle:k=!0,style:S,url:E,windowHeight:C=400,windowPosition:O="windowCenter",windowWidth:L=550}=t,T=te(t,["beforeOnClick","children","className","disabled","disabledStyle","forwardedRef","htmlTitle","networkLink","networkName","onClick","onShareWindowClose","openShareDialogOnClick","opts","resetButtonStyle","style","url","windowHeight","windowPosition","windowWidth"]);const B=async $=>{const U=d(E,w);if(!i){if($.preventDefault(),n){const W=n();Mt(W)&&await W}if(y){const W=A({height:C,width:L},O==="windowCenter"?Ut(L,C):Wt(L,C));Vt(U,W,g)}p&&p($,U)}},M=me("react-share__ShareButton",{"react-share__ShareButton--disabled":!!i,disabled:!!i},s),D=A(A(k?{backgroundColor:"transparent",border:"none",padding:0,font:"inherit",color:"inherit",cursor:"pointer"}:{},S),i&&a);return o.jsx("button",ee(A({},T),{className:M,onClick:B,ref:c,style:D,title:l,children:r}))}function b(e,t,n,r){function s(i,a){const c=n(i),l=A({},i);return Object.keys(c).forEach(u=>{delete l[u]}),o.jsx(Bt,ee(A(A({},r),l),{forwardedRef:a,networkName:e,networkLink:t,opts:n(i)}))}return s.displayName=`ShareButton-${e}`,h.forwardRef(s)}function Rt(e,{subject:t,body:n,separator:r}){return"mailto:"+x({subject:t,body:n?n+r+e:e})}b("email",Rt,e=>({subject:e.subject,body:e.body,separator:e.separator||" "}),{openShareDialogOnClick:!1,onClick:(e,t)=>{window.location.href=t}});function Ht(e,{appId:t,redirectUri:n,to:r}){return"https://www.facebook.com/dialog/send"+x({link:e,redirect_uri:n||e,app_id:t,to:r})}b("facebookmessenger",Ht,e=>({appId:e.appId,redirectUri:e.redirectUri,to:e.to}),{windowWidth:1e3,windowHeight:820});class Ft extends Error{constructor(t){super(t),this.name="AssertionError"}}function v(e,t){if(!e)throw new Ft(t)}function zt(e,{hashtag:t}){return v(e,"facebook.url"),"https://www.facebook.com/sharer/sharer.php"+x({u:e,hashtag:t})}const Kt=b("facebook",zt,e=>({hashtag:e.hashtag}),{windowWidth:550,windowHeight:400}),Jt=Kt;function Qt(){const e=h.useRef(!1);return h.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),h.useCallback(()=>e.current,[])}function Yt(e){var t=e,{children:n=g=>g,className:r,getCount:s,url:i}=t,a=te(t,["children","className","getCount","url"]);const c=Qt(),[l,d]=h.useState(void 0),[u,p]=h.useState(!1);return h.useEffect(()=>{p(!0),s(i,g=>{c()&&(d(g),p(!1))})},[i]),o.jsx("span",ee(A({className:me("react-share__ShareCount",r)},a),{children:!u&&l!==void 0&&n(l)}))}function I(e){const t=n=>o.jsx(Yt,A({getCount:e},n));return t.displayName=`ShareCount(${e.name})`,t}function Zt(e,t){const n=`https://graph.facebook.com/?id=${e}&fields=og_object{engagement}`;P(n,(r,s)=>{t(!r&&s&&s.og_object&&s.og_object.engagement?s.og_object.engagement.count:void 0)})}I(Zt);function Xt(e,{title:t}){return v(e,"hatena.url"),`http://b.hatena.ne.jp/add?mode=confirm&url=${e}&title=${t}`}b("hatena",Xt,e=>({title:e.title}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function qt(e,t){P("https://bookmark.hatenaapis.com/count/entry"+x({url:e}),(r,s)=>{t(s??void 0)})}I(qt);function Gt(e,{title:t,description:n}){return v(e,"instapaper.url"),"http://www.instapaper.com/hello2"+x({url:e,title:t,description:n})}b("instapaper",Gt,e=>({title:e.title,description:e.description}),{windowWidth:500,windowHeight:500,windowPosition:"windowCenter"});function en(e,{title:t}){return v(e,"line.url"),"https://social-plugins.line.me/lineit/share"+x({url:e,text:t})}b("line",en,e=>({title:e.title}),{windowWidth:500,windowHeight:500});function tn(e,{title:t,summary:n,source:r}){return v(e,"linkedin.url"),"https://linkedin.com/shareArticle"+x({url:e,mini:"true",title:t,summary:n,source:r})}const nn=b("linkedin",tn,({title:e,summary:t,source:n})=>({title:e,summary:t,source:n}),{windowWidth:750,windowHeight:600}),on=nn;function rn(e,{title:t,description:n}){return v(e,"livejournal.url"),"https://www.livejournal.com/update.bml"+x({subject:t,event:n})}b("livejournal",rn,e=>({title:e.title,description:e.description}),{windowWidth:660,windowHeight:460});function sn(e,{title:t,description:n,imageUrl:r}){return v(e,"mailru.url"),"https://connect.mail.ru/share"+x({url:e,title:t,description:n,image_url:r})}b("mailru",sn,e=>({title:e.title,description:e.description,imageUrl:e.imageUrl}),{windowWidth:660,windowHeight:460});function an(e,{title:t,description:n,image:r}){return v(e,"ok.url"),"https://connect.ok.ru/offer"+x({url:e,title:t,description:n,imageUrl:r})}b("ok",an,e=>({title:e.title,description:e.description,image:e.image}),{windowWidth:588,windowHeight:480,windowPosition:"screenCenter"});function ln(e,t){window.OK||(window.OK={Share:{count:function(i,a){var c,l;(l=(c=window.OK.callbacks)[i])==null||l.call(c,a)}},callbacks:[]});const n="https://connect.ok.ru/dk",r=window.OK.callbacks.length;return window.ODKL={updateCount(s,i){var a,c;const l=s===""?0:parseInt(s.replace("react-share-",""),10);(c=(a=window.OK.callbacks)[l])==null||c.call(a,i===""?void 0:parseInt(i,10))}},window.OK.callbacks.push(t),P(n+x({"st.cmd":"extLike",uid:`react-share-${r}`,ref:e}))}I(ln);function cn(e,{media:t,description:n,pinId:r}){return r?`https://pinterest.com/pin/${r}/repin/x/`:(v(e,"pinterest.url"),v(t,"pinterest.media"),"https://pinterest.com/pin/create/button/"+x({url:e,media:t,description:n}))}b("pinterest",cn,e=>({media:e.media,description:e.description,pinId:e.pinId}),{windowWidth:1e3,windowHeight:730});function dn(e,t){P("https://api.pinterest.com/v1/urls/count.json"+x({url:e}),(r,s)=>{t(s?s.count:void 0)})}I(dn);function un(e,{title:t}){return v(e,"pocket.url"),"https://getpocket.com/save"+x({url:e,title:t})}b("pocket",un,e=>({title:e.title}),{windowWidth:500,windowHeight:500});function hn(e,{title:t}){return v(e,"reddit.url"),"https://www.reddit.com/submit"+x({url:e,title:t})}b("reddit",hn,e=>({title:e.title}),{windowWidth:660,windowHeight:460,windowPosition:"windowCenter"});function fn(e,{title:t}){return v(e,"gab.url"),"https://gab.com/compose"+x({url:e,text:t})}b("gab",fn,e=>({title:e.title}),{windowWidth:660,windowHeight:640,windowPosition:"windowCenter"});function pn(e,t){const n=`https://www.reddit.com/api/info.json?limit=1&url=${e}`;P(n,{param:"jsonp"},(r,s)=>{t(!r&&s&&s.data&&s.data.children.length>0&&s.data.children[0].data.score?s.data.children[0].data.score:void 0)})}I(pn);function mn(e,{title:t}){return v(e,"telegram.url"),"https://telegram.me/share/url"+x({url:e,text:t})}b("telegram",mn,e=>({title:e.title}),{windowWidth:550,windowHeight:400});function wn(e,{title:t,caption:n,tags:r,posttype:s}){return v(e,"tumblr.url"),"https://www.tumblr.com/widgets/share/tool"+x({canonicalUrl:e,title:t,caption:n,tags:r,posttype:s})}b("tumblr",wn,e=>({title:e.title,tags:(e.tags||[]).join(","),caption:e.caption,posttype:e.posttype||"link"}),{windowWidth:660,windowHeight:460});function gn(e,t){return P("https://api.tumblr.com/v2/share/stats"+x({url:e}),(r,s)=>{t(!r&&s&&s.response?s.response.note_count:void 0)})}I(gn);function xn(e,{title:t,via:n,hashtags:r=[],related:s=[]}){return v(e,"twitter.url"),v(Array.isArray(r),"twitter.hashtags is not an array"),v(Array.isArray(s),"twitter.related is not an array"),"https://twitter.com/intent/tweet"+x({url:e,text:t,via:n,hashtags:r.length>0?r.join(","):void 0,related:s.length>0?s.join(","):void 0})}const vn=b("twitter",xn,e=>({hashtags:e.hashtags,title:e.title,via:e.via,related:e.related}),{windowWidth:550,windowHeight:400}),bn=vn;function yn(e,{title:t,separator:n}){return v(e,"viber.url"),"viber://forward"+x({text:t?t+n+e:e})}b("viber",yn,e=>({title:e.title,separator:e.separator||" "}),{windowWidth:660,windowHeight:460});function jn(e,{title:t,image:n,noParse:r,noVkLinks:s}){return v(e,"vk.url"),"https://vk.com/share.php"+x({url:e,title:t,image:n,noparse:r?1:0,no_vk_links:s?1:0})}b("vk",jn,e=>({title:e.title,image:e.image,noParse:e.noParse,noVkLinks:e.noVkLinks}),{windowWidth:660,windowHeight:460});function kn(e,t){window.VK||(window.VK={}),window.VK.Share={count:(s,i)=>{var a,c;return(c=(a=window.VK.callbacks)==null?void 0:a[s])==null?void 0:c.call(a,i)}},window.VK.callbacks=[];const n="https://vk.com/share.php",r=window.VK.callbacks.length;return window.VK.callbacks.push(t),P(n+x({act:"count",index:r,url:e}))}I(kn);function Cn(e,{title:t,image:n}){return v(e,"weibo.url"),"http://service.weibo.com/share/share.php"+x({url:e,title:t,pic:n})}b("weibo",Cn,e=>({title:e.title,image:e.image}),{windowWidth:660,windowHeight:550,windowPosition:"screenCenter"});function Nn(){return/(android|iphone|ipad|mobile)/i.test(navigator.userAgent)}function Sn(e,{title:t,separator:n}){return v(e,"whatsapp.url"),"https://"+(Nn()?"api":"web")+".whatsapp.com/send"+x({text:t?t+n+e:e})}const Dn=b("whatsapp",Sn,e=>({title:e.title,separator:e.separator||" "}),{windowWidth:550,windowHeight:400}),An=Dn;function Ln(e,{quote:t,hashtag:n}){return v(e,"workplace.url"),"https://work.facebook.com/sharer.php"+x({u:e,quote:t,hashtag:n})}b("workplace",Ln,e=>({quote:e.quote,hashtag:e.hashtag}),{windowWidth:550,windowHeight:400});const $n=({url:e})=>{const[t,n]=h.useState(!1),r=[{Component:Jt,key:"facebook",logoColor:"text-blue-600"},{Component:bn,key:"twitter",logoColor:"text-sky-500"},{Component:An,key:"whatsapp",logoColor:"text-green-500"},{Component:on,key:"linkedin",logoColor:"text-blue-800"}];return o.jsx(le,{showDropDown:t,setShowDropdown:n,Btn:o.jsx(Y,{icon:o.jsx("ion-icon",{name:"paper-plane"}),title:"Share",onClick:()=>n(!t)}),dropDownElm:o.jsx("div",{className:"absolute bottom-10 md:bottom-12 right-0 flex gap-3 bg-white shadow-[0_0px_6px_2px_rgba(0,0,0,0.3)] rounded-lg py-2 px-3 md:px-5 z-10",children:r.map(({Component:s,Icon:i,key:a,logoColor:c},l)=>o.jsx("span",{className:"up-down flex",style:{animationDelay:`${l*.1}s`},title:`Share on ${a}`,children:o.jsx(s,{url:e,title:"Checkout this amazing poll",children:o.jsx("span",{className:`text-xl md:text-3xl flex ${c}`,children:o.jsx("ion-icon",{name:`logo-${a}`})})})},a))}),className:"flex-grow"})},En=ke.lazy(()=>Ce(()=>import("./index-92bd97c9.js"),["assets/index-92bd97c9.js","assets/index-9aec5bf0.js","assets/index-83200d2b.css","assets/index-115b0bce.js","assets/index-0b1531bc.js","assets/styles-0ca58f2b.js","assets/SpinLoader-1fa1f2e1.js","assets/SpinLoader-26f25ca8.css","assets/login-1b8b9d42.js","assets/index-01004776.js","assets/TransitionGroup-32e1a896.js","assets/index-c63e7dde.css"])),V="http://localhost:5000/api/v1";function Wn({pollData:e,deletePollCallback:t}){const{userInfo:n}=h.useContext(ie),r=Ne(),[s,i]=h.useState(e),[a,c]=h.useState(null),[l,d]=h.useState(!1),[u,p]=h.useState(oe(s.endDate)),[g,y]=h.useState(!1),[w,k]=h.useState(!0),[S,E]=h.useState(r.pathname.includes("/poll/posts/")),[C,O]=h.useState(!1),[L,T]=h.useState(null);h.useEffect(()=>{const f=setInterval(()=>{p(oe(s.endDate))},1e3);return()=>clearInterval(f)},[s.endDate]);const B=f=>{f.likes.includes(n._id)?O(!0):O(!1)},M=async f=>{try{const m=await fetch(`${V}/vote/checkVote/${f}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),j=await m.json();if(m.ok&&j.voted){T(j.vote),d(!0);return}d(!1)}catch(m){console.log("Error while checking your vote on this poll ",m.message)}finally{k(!1)}},D=async f=>{try{const m=await fetch(`${V}/vote/voters?poll=${f}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),j=await m.json();if(m.ok&&j.success){c(j.voters),M(f);return}}catch(m){console.log("Error while voting on this poll",m)}};h.useEffect(()=>{B(s),D(s._id)},[s]);const $=async f=>{try{const j=await(await fetch(`${V}/poll/getPoll/${f}`)).json();j.success&&i(j.poll)}catch(m){console.log("Error while updating the information poll",m)}},U=async(f,m)=>{try{const j=await fetch(`${V}/vote/${f}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedOptionId:m}),credentials:"include"}),be=await j.json();j.ok?(d(!0),$(f),N("You have successfully voted!",{type:"success"})):N(be.message,{type:"warning"})}catch(j){console.log("Error while voting poll",j)}finally{y(!1)}},W=(f,m)=>{if(u===-1){N("Poll has ended!",{type:"warning"});return}k(!0),y(!0),l===!1&&U(e._id,m)},xe=async f=>{try{const m=await fetch(`${V}/vote/${f}`,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"}),j=await m.json();m.ok?(M(f),$(f),N("You have deleted your vote!",{type:"success"})):N(j.message,{type:"warning"})}catch(m){console.log("Error while deleting your vote for this poll",m)}finally{y(!1)}},ve=async()=>{y(!0);try{const f=await fetch(`${V}/poll/like-dislike/${s._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include"}),m=await f.json();f.ok?($(s._id),O(!C),N(m.message,{type:"info"})):N(m.message,{type:"warning"})}catch(f){console.log("Error during like on this poll",f)}finally{y(!1)}};return o.jsxs(o.Fragment,{children:[g&&o.jsx("div",{className:"absolute w-full h-full z-10 loading",children:o.jsx(_e,{})}),o.jsx(Ee,{userId:s.author,children:o.jsx(Ze,{author:s.author,pollId:s._id,deletePollCallback:t})}),o.jsx("hr",{className:"my-1"}),o.jsx(Xe,{content:s.description}),o.jsxs("div",{className:"poll md:p-5 sm:p-4 p-3",children:[o.jsx("h1",{className:`mb-3 font-bold ${_.heading5}`,children:s.title}),o.jsx("ul",{children:s.options.map((f,m)=>o.jsx("li",{className:`relative text-black ${_.heading6}`,children:l?o.jsxs("div",{className:"flex items-center",children:[o.jsxs("span",{className:"mr-4 sm:w-10 w-8",children:[Math.round(f.progress),"%"]}),w?o.jsx(gt,{}):o.jsxs("div",{style:{flex:1},children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"mr-5",children:f.subject}),f._id===L.selectedOption&&o.jsx("img",{src:Re,alt:"selected",className:"h-5 w-5"})]}),o.jsx("div",{className:"progress-bar-container",children:o.jsx("div",{className:`rounded-xl h-full ${f._id===L.selectedOption?"bg-green-600":"bg-slate-400"} absolute`,style:{width:`${f.progress}%`}})})]})]}):o.jsxs("button",{onClick:j=>W(j,f._id),"data-id":f._id,className:"overflow-hidden md:px-5 py-1 ",title:`click to vote '${f.subject}'`,children:[o.jsxs("span",{className:"md:mx-3 mx-2",children:[m+1,"."]})," ",o.jsx("p",{className:"text-start",children:f.subject})]})},f._id))}),o.jsxs("div",{className:"flex items-center mt-4",children:[o.jsx("div",{className:"flex",children:!w&&a.slice(0,3).reverse().map((f,m,j)=>o.jsx("div",{className:`rounded-full bg-white md:p-[3px] p-[1px] image-${m} ${j.length===1?"mr-1":null}`,children:o.jsx("img",{src:f.avatar.url,alt:`Voter ${m+1}`,className:"rounded-full object-top object-cover bg-slate-300 sm:w-6 sm:h-6 w-4 h-4"})},m))}),o.jsx("div",{className:`flex font-semibold flex-1 items-center justify-between ${_.smHeading}`,children:o.jsxs("div",{className:"flex text-slate-400",children:[o.jsxs("p",{className:"",children:["Total Votes: ",s.options.reduce((f,m)=>f+m.votes,0)]}),o.jsx("div",{className:"md:mx-3 mx-1",children:"•"}),u===-1?o.jsx("p",{children:"Closed"}):o.jsxs("p",{className:"",children:[u," left"]})]})}),l&&o.jsx("div",{className:`flex font-semibold items-center mt-2 ${_.smHeading}`,children:o.jsx("button",{onClick:()=>xe(s._id),className:"px-2 md:px-3 py-1 rounded-md  text-black hover:text-white bg-slate-300 hover:bg-sky-400 duration-500 transition-colors",children:"Undo"})})]})]}),o.jsxs("div",{className:`flex justify-between mt-3 ${_.heading6}`,children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-1 bg-blue-300 rounded-full mr-2",children:o.jsx("img",{src:ne,alt:"",className:"w-3 h-3"})}),s.likes.length]}),o.jsxs("div",{className:"flex",children:[o.jsx("h1",{children:Oe(new Date(s.startDate),{addSuffix:!0})}),o.jsx("div",{className:"md:mx-3 mx-1",children:"•"}),o.jsx("span",{onClick:()=>E(f=>!f),children:o.jsx(Ge,{pollId:e._id})})]})]}),o.jsx("div",{className:"h-0 border-t border-gray-400 my-1"}),o.jsxs("div",{className:"flex justify-between text-slate-600 font-semibold",children:[o.jsx(Y,{icon:o.jsx("img",{className:"w-3 md:w-5 transition-all duration-1000",src:C?He:ne,style:C?{WebkitTransform:"scaleX(-1)",transform:"scaleX(-1)"}:{}}),title:"Like",onClick:ve,className:C?"text-blue-600":""}),o.jsx(Y,{icon:o.jsx("ion-icon",{name:"chatbubble-ellipses"}),onClick:()=>E(f=>!f),title:"Comment"}),o.jsx(yt,{data:s.options,title:s.title,voted:l,ended:u===-1,isPollCreator:s.author==n._id}),o.jsx($n,{url:`http://localhost:5173/poll/posts/${s._id}`})]}),S&&o.jsx(h.Suspense,{fallback:o.jsx(o.Fragment,{children:o.jsx(ce,{})}),children:o.jsx("div",{className:"my-3",children:o.jsx(En,{pollId:e._id})})})]})}export{Wn as V};
