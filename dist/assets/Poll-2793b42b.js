import{b as u,u as g,r as s,j as o}from"./index-4c064340.js";import{V as f}from"./index-330da05f.js";import{S as h}from"./SpinLoader-16bc32d2.js";import{E as x}from"./index-ddf156a2.js";import"./styles-12bc90a9.js";import"./index-bff4b79e.js";import"./index-49d39018.js";import"./index-1721f0c2.js";import"./useMediaQuery-431b8bf4.js";const w=async(a,l)=>{try{const e=await(await fetch(`${a}`,l)).json();if(e.success)return e;throw new Error(e.message||"Server Error")}catch(r){throw console.log("Error while fetching the data: ",r.message),new Error(r)}},E="https://mern-polling.onrender.com/api/v1",N=()=>{const a=u(),l=g(),[r,e]=s.useState(!0),[p,m]=s.useState(null),[n,c]=s.useState(null),d=a.pollId,i=async()=>{e(!0),c(null);try{const t=await w(`${E}/poll/getPoll/${d}`,{credentials:"include"});console.log(t),m(t.poll)}catch(t){console.error(t),c(t.message)}finally{e(!1)}};return s.useEffect(()=>{i()},[]),n?o.jsx(x,{heading:"Error fetching the poll",message:n,action:i}):o.jsx("div",{className:"w-full flex justify-center border",children:r?o.jsx(h,{}):o.jsx("div",{className:"bg-white rounded-[10px] overflow-hidden mb-4 px-2 py-1 md:px-6 md:py-2 relative max-w-[750px] flex-grow",children:o.jsx(f,{pollData:p,deletePollCallback:()=>{l("/poll")}})})})};export{N as default};
