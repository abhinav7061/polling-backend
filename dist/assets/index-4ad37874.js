import{u as C,r as a,U as S,b as P,j as e}from"./index-395cc95b.js";import{C as x,p as F,i as f,d as p,v as D}from"./index-652582aa.js";import{s as M}from"./styles-12bc90a9.js";import{S as h}from"./SpinLoader-aa9ba6ba.js";import{F as T,a as U}from"./index-a2995305.js";import{w as V}from"./index-1503e879.js";import{E as $}from"./index-e92b4352.js";import"./FollowersContext-836e9cc2.js";import"./index-c18650f6.js";import"./TransitionGroup-62d8bd32.js";const g="http://localhost:5000/api/v1",B=()=>{const w=C(),{userInfo:j}=a.useContext(S),o=P().id,[y,c]=a.useState(!0),[t,b]=a.useState(null),[v,m]=a.useState(!0),[l,N]=a.useState(null),[d,n]=a.useState(null),E=async()=>{n(null),c(!0);try{const s=await fetch(`${g}/user/${o}`,{credentials:"include"}),r=await s.json();if(r.success&&s.ok)N(r.user);else throw new Error((r==null?void 0:r.message)||"Server Error")}catch(s){console.log("Error: ",s),n(s.message)}finally{c(!1)}},u=async()=>{n(null),m(!0);try{const s=await fetch(`${g}/user/dashboard/${o}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}),r=await s.json();if(s.ok)b(r);else throw new Error((r==null?void 0:r.message)||"Server Error")}catch(s){console.log("Error while getting your dashboard",s),n(s.message)}finally{m(!1)}},i=()=>{V.warning("You are not allowed to change this data.")};return a.useEffect(()=>{window.scrollTo(0,0),j._id==o&&w("/poll/my_profile"),E(),u()},[o]),d?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx($,{heading:"Error fetching the dashoard",message:d,action:u})}):y?e.jsx("div",{className:"absolute w-full h-full z-10 flex justify-center items-center",children:e.jsx(h,{})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-around items-center flex-col xl:flex-row",children:[e.jsxs("div",{className:"rounded-3xl bg-white sm:p-6 p-3 flex flex-col items-center w-full xl:w-2/3",children:[e.jsx("div",{className:"rounded-xl border-[2px]  border-dashed border-stone-300 p-3 flex items-center gap-2",children:e.jsx("div",{className:"relative flex justify-center items-center group rounded-full h-48 w-48 overflow-hidden ",children:e.jsx("img",{src:l.avatar.url,alt:"Profile pic",className:"transition-opacity duration-300  object-top object-cover  h-48 w-48"})})}),e.jsxs("div",{className:"flex items-center justify-center flex-wrap gap-x-10 my-5 relative",children:[e.jsx("h1",{className:`font-bold whitespace-nowrap ${M.heading4}`,children:l.name}),e.jsx("textarea",{type:"text",name:"myStatus",value:l.myStatus,className:"outline-none text-[12px] lg:text-[16px] flex-grow resize-none py-1 rounded-md border-2 border-transparent focus:border-slate-500 lg:px-3 sm:px-1 text-center",onChange:i,disabled:!0})]}),e.jsxs("div",{className:" rounded-xl p-3 bg-slate-50",children:[e.jsxs("div",{className:"flex flex-wrap items-center my-3",children:[e.jsx("label",{htmlFor:"name",className:"ml-2 font-semibold mr-5",style:{whiteSpace:"nowrap"},children:"Name:"}),e.jsx("input",{type:"text",name:"name",value:l.name,className:"outline-none my-[2px] px-3 py-1 rounded-md border-2 focus:border-slate-500 w-full overflow-scroll",onChange:i,disabled:!0})]}),e.jsxs("div",{className:"flex flex-wrap items-center my-3",children:[e.jsx("label",{htmlFor:"email",className:"ml-2 font-semibold mr-5",style:{whiteSpace:"nowrap"},children:"Email:"}),e.jsx("input",{type:"email",name:"email",value:l.email,className:"outline-none my-[2px] px-3 py-1 rounded-md border-2 focus:border-slate-500 w-full overflow-scroll",onChange:i,disabled:!0})]})]})]}),v?e.jsx(h,{}):e.jsxs("div",{className:"xl:ml-5 items-center gap-6 md:gap-8 mt-8 xl:mt-0 flex flex-col lg:flex-row w-full xl:flex-col xl:w-auto",children:[e.jsx(x,{img:F,num:t.totalPollsCreated.totalNumber,title:"My Total Polls",color:t.totalPollsCreated.growth?"green":"red",progress:t.totalPollsCreated.growthPercentage,indicator:t.totalPollsCreated.growth?f:p,className:"w-full"}),e.jsx(x,{img:D,num:t.lifetimeVotes.totalNumber,title:"My Total Votes",color:t.lifetimeVotes.growth?"green":"red",progress:t.lifetimeVotes.growthPercentage,indicator:t.lifetimeVotes.growth?f:p,className:"w-full"})]})]}),e.jsxs("div",{className:"flex gap-12 w-full mt-12 xl:flex-row flex-col pb-5 sm:pb-0",children:[e.jsx(T,{userId:o,userName:l.name}),e.jsx(U,{userId:o,userName:l.name})]})]})};export{B as default};
