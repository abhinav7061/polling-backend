import{r as t,j as e}from"./index-4c064340.js";import{d as k}from"./debounce-13b53e9a.js";import{S as T}from"./SpinLoader-16bc32d2.js";import{V as L}from"./index-330da05f.js";import{p as M}from"./index-2740fe42.js";import{T as H,C as O}from"./TransitionGroup-893ef530.js";import{s as _}from"./styles-12bc90a9.js";const z=l=>{const[i,n]=t.useState([]),[a,d]=t.useState(null),[r,s]=t.useState(1),[o,m]=t.useState(!0),[h,b]=t.useState(!0),[f,v]=t.useState(""),[w,y]=t.useState("newer"),[j,P]=t.useState("all"),[E,N]=t.useState(null),S=async()=>{try{const c=await(await fetch(`${l}?page=${encodeURIComponent(r)}&search=${encodeURIComponent(f)}&sort=${w}&active=${j}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"})).json();if(c.success)c.polls.length<5&&m(!1),n($=>[...new Set([...$,...c.polls])]);else throw new Error(c.message)}catch(p){console.log("Error fetching data:",p),d(p.message)}finally{b(!1)}};t.useEffect(()=>{o&&S()},[r,o]);const C=()=>{window.innerHeight+document.documentElement.scrollTop>=document.documentElement.scrollHeight-150&&(b(!0),s(c=>c+1))},g=t.useCallback(k(C,100),[]);return t.useEffect(()=>(window.addEventListener("scroll",g,{passive:!0}),()=>{window.removeEventListener("scroll",g)}),[g]),{feeds:i,setFeeds:n,errorMessage:a,loading:h,hasMore:o,search:f,sort:w,active:j,setSearch:v,setSort:y,setActive:P,resetPolls:()=>{N(f),v(""),n([]),m(!0),b(!0),r===1?S():s(1)},searchPlaceholder:E}},R="_poll_item_ng3t9_1",A="_bounceOut_ng3t9_1",u={poll_item:R,"bounce-enter":"_bounce-enter_ng3t9_6","bounce-enter-active":"_bounce-enter-active_ng3t9_11","bounce-exit":"_bounce-exit_ng3t9_17","bounce-exit-active":"_bounce-exit-active_ng3t9_22",bounceOut:A},B=({feeds:l,setFeeds:x,loading:i,hasMore:n,role:a,customMessage:d})=>{const r=d||M[a]||"No Feeds Found",s=o=>{x(m=>m.filter(h=>h._id!==o))};return e.jsxs("div",{className:"flex flex-col flex-1 items-center",children:[e.jsx(H,{children:l.length>0&&l.map(o=>e.jsx(O,{timeout:500,classNames:{enter:u["bounce-enter"],enterActive:u["bounce-enter-active"],exit:u["bounce-exit"],exitActive:u["bounce-exit-active"]},children:e.jsx("div",{className:`bg-white rounded-[10px] max-w-3xl overflow-hidden mb-2 sm:mb-4 px-2 py-1 md:px-6 md:py-2 relative ${u.poll_item}`,children:e.jsx(L,{pollData:o,role:a,deletePollCallback:s})})},o._id))}),i&&n?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(T,{})}):l.length===0?e.jsx("h1",{className:"text-center text-base lg:text-xl font-semibold",children:r}):e.jsx("h1",{className:"text-center text-base lg:text-xl font-semibold",children:"You have Reached the end"})]})},J=({search:l,sort:x,setSearch:i,setSort:n,onSearchSortSubmit:a,children:d,searchPlaceholder:r})=>e.jsxs("form",{className:`xl:border-l xl:border-slate-400 flex xl:flex-col justify-between xl:justify-start xl:mb-0 xs:gap-3 gap-1 ${_.heading6} h-auto xl:h-screen backdrop-blur-sm overflow-y-auto overflow-x-hidden sticky top-0 left-0  py-2 ps-10 pe-2 sm:ps-0 sm:pe-0 xl:ps-7`,onSubmit:a,children:[e.jsx("input",{type:"text",placeholder:r||"Search Poll",value:l,onChange:s=>i(s.target.value),className:"border-2 border-slate-400 w-10 xl:w-auto px-3 sm:px-5 xl:py-2 py-1 outline-none focus:border-slate-600 rounded-3xl flex-1 xl:flex-none min-w-0"}),e.jsxs("select",{value:x,onChange:s=>n(s.target.value),className:`xl:mt-4 ${_.heading6} outline-none font-bold px-3 py-2 rounded-3xl bg-slate-400 cursor-pointer`,children:[e.jsx("option",{value:"newer",children:"Newer"}),e.jsx("option",{value:"older",children:"Older"}),e.jsx("option",{value:"likes",children:"Likes"}),e.jsx("option",{value:"votes",children:"Votes"})]}),d,e.jsx("button",{className:"px-2 whitespace-nowrap md:px-3 py-1 rounded-md text-black hover:text-white bg-slate-300 hover:bg-sky-400 duration-500 transition-colors font-semibold xl:mt-5",type:"submit",children:"Get Polls"})]});export{B as P,J as S,z as u};
