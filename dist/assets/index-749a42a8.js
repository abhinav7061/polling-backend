import{r as a,U as u,u as f,j as e,N as m,L as p,a as g,O as j}from"./index-a1485a9d.js";import{U as b}from"./index-328a23ee.js";import{s as r}from"./styles-12bc90a9.js";import{n as h,f as y}from"./index-2740fe42.js";import{L as N,l as v,C as k}from"./index-8f2162d9.js";import{L}from"./SpinLoader-9c7d013d.js";const w="/assets/menu-e0613cf3.svg",C="/assets/close-945782e8.svg";function U(){const{userInfo:s}=a.useContext(u),n=f(),[l,c]=a.useState(!1);return e.jsx("nav",{className:`${r.paddingX} md:py-5 py-3 sticky top-0 bg-gray-900 z-[1000]`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(m,{to:"/",className:"flex items-center",children:[e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/128/6432/6432236.png?track=ais",className:"h-8 mr-1",alt:"pollab"}),e.jsx("span",{className:"self-center text-sm font-semibold text-white",children:"PollLab"})]}),e.jsx("div",{className:"items-center hidden md:flex",children:e.jsx("ul",{className:"flex font-medium",children:h.map((t,o)=>e.jsx("li",{children:e.jsx(m,{to:t.linkTo,className:({isActive:d})=>{const i=d?"text-sky-600":"text-white",x=o===0?"ml-0":"ml-6";return i+" hover:text-sky-400 "+x},children:t.name})},t.id))})}),s&&e.jsxs("div",{className:`flex justify-center items-center ${r.heading6} `,children:[e.jsx(p,{to:"profile",children:e.jsxs("p",{className:"text-white",children:["Hi ",s.name," !"]})}),e.jsx(N,{})]}),e.jsx("div",{className:`hidden ${s?null:"md:block"} `,children:e.jsx("button",{type:"button",className:" bg-green-500 text-black hover:bg-blue-400  font-semibold py-2 px-5 rounded text-base",onClick:()=>{n("/login")},children:"LogIn/SignUp"})}),e.jsxs("div",{className:"flex md:hidden items-center z-50",children:[e.jsx("div",{className:"text-3xl md:hidden cursor-pointer",onClick:()=>c(t=>!t),"aria-expanded":l,children:e.jsx("img",{src:l?C:w,alt:"menu",className:""})}),e.jsx("div",{className:` ${l?"flex":"hidden"} items-center flex absolute top-16 right-0 mx-4 my-2 min-w-[140px] rounded-xl sidebar bg-slate-900 p-6`,children:e.jsxs("ul",{className:"fflex justify-end items-start flex-1 flex-col",children:[h.map(t=>e.jsx("li",{onClick:()=>c(!l),children:e.jsx(m,{to:t.linkTo,className:({isActive:o})=>(o?"text-sky-600":"text-white")+" hover:text-sky-400",children:t.name})},t.id)),e.jsx("li",{className:`${s?"hidden":"mt-4"}`,children:e.jsx("button",{type:"button",className:" bg-green-500 text-black hover:bg-blue-400  font-semibold py-2 px-5 rounded text-base",onClick:()=>{n("/login")},children:"LogIn/SignUp"})})]})})]})]})})}function $(){return e.jsxs("div",{className:`${r.paddingX} bg-gray-900 text-white md:py-5 py-3 flex justify-between items-center text-[14px] mt-auto`,children:[e.jsxs("p",{children:["Copyright â’¸ 2023 Pollab.",e.jsx("br",{className:"md:hidden"})," All Rights Reserved."]}),e.jsx("div",{children:e.jsx("ul",{className:"flex  flex-col md:flex-row",children:y.map(s=>e.jsx("li",{className:"m-2",children:e.jsx(p,{to:s.linkTo,children:s.name})},s.id))})})]})}const S=()=>{const s={display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",width:"100%",backgroundColor:"#000",color:"#fff",overflow:"hidden"},n={animation:"scaleToFull 3s ease-in-out infinite",width:"200px",height:"200px"};return e.jsx("div",{style:s,children:e.jsx("img",{src:v,style:n})})},I="https://mern-polling.onrender.com/api/v1",O=()=>{const{userInfo:s,setUserInfo:n}=a.useContext(u),[l,c]=a.useState(!0),t=f(),o=g(),d=async()=>{try{const i=await fetch(`${I}/user/me`,{credentials:"include"}),x=await i.json();x.success&&i.ok&&(n(x.user),o.pathname.startsWith("/poll")||t("/poll"))}catch(i){console.error("Error fetching user data:",i)}finally{c(!1)}};return a.useEffect(()=>{d()},[]),e.jsx("div",{className:`${r.flexCenter}`,children:l?e.jsx(S,{}):e.jsxs("div",{className:`${r.boxWidth} flex flex-col min-h-screen`,children:[s?null:e.jsx(U,{}),e.jsx(b,{position:"top-right",richColors:!0,closeButton:"true"})," ",e.jsx(a.Suspense,{fallback:e.jsx(k,{children:e.jsx(L,{})}),children:e.jsx(j,{})}),s?null:e.jsx($,{})]})})};export{O as default};
